<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for api/controllers/UserdetailsController.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">api/controllers</a> UserdetailsController.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">60.87% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>28/46</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">16.67% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>1/6</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">43.75% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>7/16</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">60.87% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>28/46</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">"use strict";
exports.__esModule = true;
var dbUtilies = require("../services/dbUtils");
var requestValidator = require('../Helper/requestValidator');
var JsonUtils = require('../Helper/JsonUtils');
var maskData = require('../Helper/maskData');
var ResponseUtils = require('../Helper/ResponseUtils');
// Get Users
function get_users(req, res, next) {
    var name = req.query['name'];
    var id = req.query['id'];
    /* add all fields whic are required for get call. Here we are querying the database with id,name,type,database_acds_id
      if the query params is empty It will be get all call */
    var params = [
        { name: "id", required: false },
        { name: "name", alias: "host_name", required: false },
        { name: "type", alias: "db_type", required: false },
        { name: "database_acds_id", required: false }
    ];
    /* collectToObj takes 3 parameters
    1. your params which are used for the get call if the user interested
    2. Query params
    3. atleast one is required.
    Here in my params if everything is false like to call get all so we pass the third argument to true.
    if you like to make any one of the params are required which are defined in params array then change the third
    argument to true
     */
    var data = JsonUtils.collectToObj(params, req.query, false);
    // validate params
    //var params = requestValidator.validateReqParams(req,['?name', '?password']);
    <span class="missing-if-branch" title="else path not taken" >E</span>if (!data.valid) {
        return res.negotiate(ResponseUtils.badRequest(data.details));
    }
<span class="cstat-no" title="statement not covered" >    if (name) {</span>
        var reqObj = <span class="cstat-no" title="statement not covered" >{ userName: name };</span>
<span class="cstat-no" title="statement not covered" >        dbUtilies.getOne('user_details', reqObj).subscribe(<span class="fstat-no" title="function not covered" >fu</span>nction (data) {</span>
<span class="cstat-no" title="statement not covered" >            res.status(200).send(data);</span>
        }, <span class="fstat-no" title="function not covered" >fu</span>nction (err) {
<span class="cstat-no" title="statement not covered" >            console.log('error', err);</span>
<span class="cstat-no" title="statement not covered" >            res.status(404).send(err);</span>
        });
    }
    else <span class="cstat-no" title="statement not covered" >if (id) {</span>
        var reqObj = <span class="cstat-no" title="statement not covered" >{ id: id };</span>
<span class="cstat-no" title="statement not covered" >        dbUtilies.getOne('user_details', reqObj).subscribe(<span class="fstat-no" title="function not covered" >fu</span>nction (data) {</span>
<span class="cstat-no" title="statement not covered" >            res.status(200).send(data);</span>
        }, <span class="fstat-no" title="function not covered" >fu</span>nction (err) {
<span class="cstat-no" title="statement not covered" >            res.notFound(err);</span>
            // res.status(404).send(err);
        });
    }
    else {
        // res.json(sanitizer.escape('your dirty string'));
        // res.json(sanitizer.normalizeRCData('your dirty string'));
<span class="cstat-no" title="statement not covered" >        maskData.maskReqData({ "data": "data", "name": "name" });</span>
<span class="cstat-no" title="statement not covered" >        dbUtilies.getAll('user_details')</span>
            .subscribe(<span class="fstat-no" title="function not covered" >fu</span>nction (data) {
<span class="cstat-no" title="statement not covered" >            res.status(200).send(data);</span>
        }, <span class="fstat-no" title="function not covered" >fu</span>nction (err) {
<span class="cstat-no" title="statement not covered" >            res.status(500).send(err);</span>
        });
    }
}
exports.get_users = get_users;
// Create New User
function create_user(req, res, next) {
    var reqBody = req.body;
    dbUtilies.create('user_details', reqBody).subscribe(function (data) {
        res.status(201).send(data);
    }, <span class="fstat-no" title="function not covered" >fu</span>nction (err) {
<span class="cstat-no" title="statement not covered" >        res.status(400).send(err);</span>
    });
}
exports.create_user = create_user;
// Update The User
function update_user(req, res, next) {
    var id = req.params['id'];
    var reqObj = { id: id };
    var reqBody = req.body;
    dbUtilies.update('user_details', reqObj, reqBody).subscribe(function (data) {
        res.status(200).send(data);
    }, <span class="fstat-no" title="function not covered" >fu</span>nction (err) {
<span class="cstat-no" title="statement not covered" >        res.status(404).send(err);</span>
    });
}
exports.update_user = update_user;
//Delete The User
function delete_user(req, res, next) {
    var id = req.params['id'];
    var reqObj = { id: id };
    dbUtilies.destroy('user_details', reqObj).subscribe(function (data) {
        res.status(200).send(data);
    }, <span class="fstat-no" title="function not covered" >fu</span>nction (err) {
<span class="cstat-no" title="statement not covered" >        res.status(404).send(err);</span>
    });
}
exports.delete_user = delete_user;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Mon Dec 04 2017 14:32:33 GMT+0530 (IST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
